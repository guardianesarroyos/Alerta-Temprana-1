<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Alerta Temprana - Arroyo Escobar</title>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background-color: #121212;
      color: #fff;
      padding: 1rem;
    }

    .header {
      text-align: center;
      margin-bottom: 1rem;
    }

    .header h1, .header h2 {
      margin: 0;
      font-size: 1.5rem;
    }

    .selector-container, .slider-container, .checkboxes, .impact-container, .info-buttons {
      margin-bottom: 1rem;
    }

    .tooltip {
      position: relative;
      display: inline-block;
    }

    .tooltip .tooltiptext {
      visibility: hidden;
      width: 200px;
      background-color: #333;
      color: #fff;
      text-align: left;
      border-radius: 5px;
      padding: 0.5rem;
      position: absolute;
      z-index: 1;
      top: 125%;
      left: 50%;
      transform: translateX(-50%);
      opacity: 0;
      transition: opacity 0.3s;
    }

    .tooltip:hover .tooltiptext {
      visibility: visible;
      opacity: 1;
    }

    .slider-container input[type="range"] {
      width: 100%;
    }

    .barra-container {
      position: relative;
      height: 800px;
      width: 120px;
      background-color: #333;
      border-radius: 10px;
      margin: auto;
      overflow: hidden;
    }

    .nivel-agua {
      position: absolute;
      bottom: 0;
      width: 100%;
      background-color: #00bfff;
      transition: height 0.3s ease;
    }

    .marcas {
      position: absolute;
      width: 100%;
      height: 100%;
      top: 0;
      left: 0;
      pointer-events: none;
    }

    .marca {
      position: absolute;
      width: 100%;
      display: flex;
      justify-content: flex-end;
      padding-right: 5px;
      font-size: 0.75rem;
      color: #ccc;
      box-sizing: border-box;
    }

    .footer {
      margin-top: 2rem;
      text-align: center;
      font-size: 0.8rem;
      color: #888;
    }
  </style>
</head>
<body>
  <div class="header">
    <h1>Alerta Temprana</h1>
    <h2>Arroyo Escobar</h2>
  </div>

  <div class="selector-container">
    <label for="scenario">Escenario:</label>
    <select id="scenario">
      <option value="24">24 hs</option>
      <option value="48">48 hs</option>
      <option value="72">72 hs</option>
    </select>
    <div class="tooltip">ⓘ
      <span class="tooltiptext">
        Seleccioná la duración del evento de lluvia para estimar la altura del arroyo.
      </span>
    </div>
  </div>

  <div class="info-buttons">
    <button onclick="alert('El escenario de 24 hs simula lluvias concentradas en un solo d\u00eda. Responde r\u00e1pido y suele provocar crecidas m\u00e1s abruptas.')">+ info 24h</button>
    <button onclick="alert('El escenario de 48 hs contempla lluvias repartidas en dos d\u00edas. El nivel sube m\u00e1s lento, pero se mantiene m\u00e1s tiempo.')">+ info 48h</button>
    <button onclick="alert('El escenario de 72 hs modela lluvias prolongadas. Puede saturar el suelo lentamente y generar crecidas prolongadas.')">+ info 72h</button>
  </div>

  <div class="slider-container">
    <label for="rain">Lluvia acumulada (mm): <span id="rainValue">0</span></label>
    <input type="range" id="rain" min="0" max="300" step="10" value="0" />
  </div>

  <div class="checkboxes">
    <label><input type="checkbox" id="sudestada" /> Sudestada</label><br />
    <label><input type="checkbox" id="aguasArriba" /> Lluvias aguas arriba</label><br />
    <label><input type="checkbox" id="sueloSaturado" /> Suelo impermeable</label>
  </div>

  <div class="impact-container">
    <p>Altura estimada: <span id="altura"></span> m</p>
    <p>Impacto estimado: <span id="impacto"></span></p>
  </div>

  <div class="barra-container">
    <div class="nivel-agua" id="nivelAgua" style="height: 0%"></div>
    <div class="marcas" id="marcas"></div>
  </div>

  <div class="footer">
    Creado por guardianesarroyosba
  </div>

  <script>
    const rain = document.getElementById("rain");
    const rainValue = document.getElementById("rainValue");
    const alturaDisplay = document.getElementById("altura");
    const impactoDisplay = document.getElementById("impacto");
    const scenario = document.getElementById("scenario");
    const sudestada = document.getElementById("sudestada");
    const aguasArriba = document.getElementById("aguasArriba");
    const sueloSaturado = document.getElementById("sueloSaturado");
    const nivelAgua = document.getElementById("nivelAgua");
    const marcasContainer = document.getElementById("marcas");

    const ALTURA_MAX = 5.5; // metros
    const ALTURA_PX = 800; // px altura visual

    const tabla = {
      0: [1.3, 1.16, 1.05, "Cauce 1/4"],
      10: [1.4, 1.25, 1.13, "Cauce 1/4"],
      20: [1.6, 1.42, 1.3, "Cauce 1/4"],
      30: [1.9, 1.69, 1.54, "Cauce 1/4"],
      40: [2.2, 1.96, 1.78, "Cauce 1/4"],
      50: [2.6, 2.31, 2.11, "Cauce 1/2"],
      60: [2.8, 2.49, 2.27, "Cauce 1/2"],
      70: [3.0, 2.67, 2.43, "Cauce 1/2"],
      80: [3.2, 2.85, 2.59, "Cauce 3/4"],
      90: [3.33, 2.96, 2.7, "Cauce 3/4"],
      100: [3.47, 3.09, 2.81, "Cauce 3/4"],
      110: [3.6, 3.2, 2.92, "Cauce Completo"],
      120: [3.77, 3.36, 3.06, "Terrenos bajos inundados"],
      130: [3.93, 3.5, 3.18, "Cauce Completo"],
      140: [4.1, 3.65, 3.32, "CASAS_Bajas"],
      150: [4.23, 3.76, 3.43, "CASAS_Bajas"],
      160: [4.37, 3.89, 3.54, "CASAS_Bajas"],
      170: [4.5, 4.01, 3.65, "CASAS_Medias"],
      180: [4.6, 4.09, 3.73, "CASAS_Medias"],
      190: [4.7, 4.18, 3.81, "CASAS_Medias"],
      200: [4.8, 4.27, 3.89, "CASAS_Altas"],
      210: [4.92, 4.38, 3.99, "CASAS_Altas"],
      220: [5.04, 4.49, 4.08, "CASAS_Altas"],
      230: [5.15, 4.58, 4.17, "CASAS_Altas"],
      240: [5.25, 4.67, 4.25, "Puente Autopista"],
      250: [5.35, 4.76, 4.33, "Puente Autopista"],
      260: [5.44, 4.84, 4.41, "Puente Autopista"],
      270: [5.53, 4.92, 4.48, "Puente Autopista"],
      280: [5.62, 5.00, 4.55, "Puente Autopista"],
      290: [5.71, 5.08, 4.63, "Puente Autopista"],
      300: [5.8, 5.16, 4.70, "Inundaci\u00f3n Total"]
    };

    function generarMarcas() {
      for (let i = 0; i <= ALTURA_MAX; i += 0.25) {
        const marca = document.createElement("div");
        marca.className = "marca";
        const porcentaje = (i / ALTURA_MAX) * 100;
        marca.style.bottom = `${porcentaje}%`;
        marca.innerText = `${i.toFixed(2)} m`;
        marcasContainer.appendChild(marca);
      }
    }

    function updateValues() {
      const mm = parseInt(rain.value);
      const fila = tabla[mm];
      let altura = fila[parseInt(scenario.value) / 24 - 1];
      if (sudestada.checked) altura += 0.2;
      if (aguasArriba.checked) altura += 0.2;
      if (sueloSaturado.checked) altura += 0.2;
      altura = parseFloat(altura.toFixed(2));

      const alturaLimitada = Math.min(altura, ALTURA_MAX);
      const porcentaje = (alturaLimitada / ALTURA_MAX) * 100;
      nivelAgua.style.height = `${porcentaje}%`;

      alturaDisplay.textContent = altura;
      impactoDisplay.textContent = fila[3];
      rainValue.textContent = mm;
    }

    generarMarcas();
    updateValues();

    rain.addEventListener("input", updateValues);
    scenario.addEventListener("change", updateValues);
    sudestada.addEventListener("change", updateValues);
    aguasArriba.addEventListener("change", updateValues);
    sueloSaturado.addEventListener("change", updateValues);
  </script>
</body>
</html>
